	TITLE	D:\work\product\dapi\src\Ph\ph_main.c
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS	ENDS
$$SYMBOLS	SEGMENT BYTE USE32 'DEBSYM'
$$SYMBOLS	ENDS
$$TYPES	SEGMENT BYTE USE32 'DEBTYP'
$$TYPES	ENDS
_TLS	SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif
PUBLIC	_FreePHInstanceData
PUBLIC	_ph_main@4
EXTRN	_paul_8:BYTE
EXTRN	_betty_8:BYTE
EXTRN	_harry_8:BYTE
EXTRN	_frank_8:BYTE
EXTRN	_kit_8:BYTE
EXTRN	_ursula_8:BYTE
EXTRN	_rita_8:BYTE
EXTRN	_wendy_8:BYTE
EXTRN	_dennis_8:BYTE
EXTRN	_paul:BYTE
EXTRN	_betty:BYTE
EXTRN	_harry:BYTE
EXTRN	_frank:BYTE
EXTRN	_kit:BYTE
EXTRN	_ursula:BYTE
EXTRN	_rita:BYTE
EXTRN	_wendy:BYTE
EXTRN	_dennis:BYTE
EXTRN	_paul_8_tune:BYTE
EXTRN	_betty_8_tune:BYTE
EXTRN	_harry_8_tune:BYTE
EXTRN	_frank_8_tune:BYTE
EXTRN	_kit_8_tune:BYTE
EXTRN	_ursula_8_tune:BYTE
EXTRN	_rita_8_tune:BYTE
EXTRN	_wendy_8_tune:BYTE
EXTRN	_dennis_8_tune:BYTE
EXTRN	_paul_tune:BYTE
EXTRN	_betty_tune:BYTE
EXTRN	_harry_tune:BYTE
EXTRN	_frank_tune:BYTE
EXTRN	_kit_tune:BYTE
EXTRN	_ursula_tune:BYTE
EXTRN	_rita_tune:BYTE
EXTRN	_wendy_tune:BYTE
EXTRN	_dennis_tune:BYTE
EXTRN	__imp__calloc:NEAR
EXTRN	_default_lang:NEAR
EXTRN	__imp__SetEvent@4:NEAR
EXTRN	_kltask:NEAR
_TEXT	SEGMENT
_phTTS$ = 8
_ph_main@4 PROC NEAR

; 231  : {

  00000	53		 push	 ebx

; 232  : 	/* Added a variable to get the handle of Current instance krenel_share_data */
; 233  : 	PKSD_T                  pKsd_t;
; 234  : 	PDPH_T                  pDph_t = NULL;
; 235  : 	PDPHSETTAR_ST           pDphsettar_st = NULL;	/* Pointer to PHSETTAR.C file STATIC structure */
; 236  : 
; 237  : #ifdef WITHOUT_CALLOC
; 238  : 	int                     i;		   /* MVP : 03/18/96 */
; 239  : #endif
; 240  : 
; 241  : #ifdef MSDOS
; 242  : 	phTTS = &hTTS;
; 243  : 	phTTS->pKernelShareData = kernel_share;		/* set a pointer to the KS structure */
; 244  : 	pKsd_t = phTTS->pKernelShareData;
; 245  : 	phTTS->pPHThreadData = &Dph_t;
; 246  : 	pDph_t = phTTS->pPHThreadData;
; 247  : 	pDph_t->pSTphsettar = &STphsettar;
; 248  : 	pDphsettar_st = pDph_t->pSTphsettar;
; 249  : #else
; 250  : 	pKsd_t = phTTS->pKernelShareData;
; 251  : 
; 252  : #if defined (__osf__) || defined (__linux__)
; 253  :     /* GL 04/21/1997  add this as the latest OSF code */
; 254  :     /* Initialize thread error field to no error */
; 255  :     phTTS->uiThreadError = MMSYSERR_NOERROR;
; 256  : #endif
; 257  : 
; 258  : #ifdef SEPARATE_PROCESSES
; 259  : 	kernel_share = (struct share_data *) malloc (sizeof (struct share_data));
; 260  : 
; 261  : #endif
; 262  : 
; 263  : 
; 264  : 	/* MVP MI kinp is not used in this function  kinp = pKsd_t->lang_ph[LANG_english]; */
; 265  : 	if ((pDph_t = (PDPH_T) calloc (1, sizeof (DPH_T))) == NULL)

  00001	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR __imp__calloc
  00007	55		 push	 ebp
  00008	56		 push	 esi
  00009	57		 push	 edi
  0000a	8b 7c 24 14	 mov	 edi, DWORD PTR _phTTS$[esp+12]
  0000e	68 d4 2b 00 00	 push	 11220			; 00002bd4H
  00013	6a 01		 push	 1
  00015	8b 6f 08	 mov	 ebp, DWORD PTR [edi+8]
  00018	ff d3		 call	 ebx
  0001a	8b f0		 mov	 esi, eax
  0001c	83 c4 08	 add	 esp, 8
  0001f	85 f6		 test	 esi, esi
  00021	75 0c		 jne	 SHORT $L71215
  00023	5f		 pop	 edi
  00024	5e		 pop	 esi
  00025	5d		 pop	 ebp

; 266  : #ifdef WIN32
; 267  : 		return (MMSYSERR_NOMEM);

  00026	b8 07 00 00 00	 mov	 eax, 7
  0002b	5b		 pop	 ebx

; 484  : #endif
; 485  : #if defined (__osf__) || defined (__linux__)
; 486  : 		OP_ExitThread(MMSYSERR_NOERROR);
; 487  : 		OP_THREAD_RETURN;
; 488  : #endif
; 489  : }

  0002c	c2 04 00	 ret	 4
$L71215:

; 268  : #endif
; 269  : #if defined (__osf__) || defined (__linux__)
; 270  : 		phTTS->uiThreadError = MMSYSERR_NOMEM;
; 271  :         else
; 272  :         {
; 273  : #endif
; 274  : 		/* Associate this PH thread instance specific structure with current speech object */
; 275  : 		phTTS->pPHThreadData = pDph_t;

  0002f	89 77 18	 mov	 DWORD PTR [edi+24], esi

; 276  : #ifndef MSDOS
; 277  : 		/* MGS BATS 470 Fixed crashing due to reset */
; 278  : 		pDph_t->phTTS=phTTS;
; 279  : #endif
; 280  : 		/* MVP : Initialize all structure pointers in DPH_T to NULL. */
; 281  : 		pDph_t->pSTphsettar = NULL;
; 282  : 
; 283  : 	/****************************************************************************/
; 284  : 	/* MVP : Allocation of structures specific to STATIC varaibles in each file */
; 285  : 	/****************************************************************************/
; 286  : 
; 287  : 		/* Structure for PHSETTAR.C file specific static variables */
; 288  : 		/* MVP: 03/19/96 Use calloc() to initialize all elements to zero. */
; 289  : 		if ((pDphsettar_st = (PDPHSETTAR_ST) calloc (1, sizeof (DPHSETTAR_ST))) == NULL)

  00032	68 c4 00 00 00	 push	 196			; 000000c4H
  00037	89 be dc 14 00
	00		 mov	 DWORD PTR [esi+5340], edi
  0003d	6a 01		 push	 1
  0003f	c7 86 d0 2b 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+11216], 0
  00049	ff d3		 call	 ebx
  0004b	8b d8		 mov	 ebx, eax
  0004d	83 c4 08	 add	 esp, 8
  00050	85 db		 test	 ebx, ebx
  00052	75 18		 jne	 SHORT $L71220

; 290  : 		{
; 291  : 			FreePHInstanceData (pDph_t);

  00054	56		 push	 esi
  00055	e8 00 00 00 00	 call	 _FreePHInstanceData
  0005a	83 c4 04	 add	 esp, 4

; 292  : 			phTTS->pPHThreadData = NULL;

  0005d	89 5f 18	 mov	 DWORD PTR [edi+24], ebx

; 293  : #ifdef WIN32
; 294  : 			return (MMSYSERR_NOMEM);

  00060	b8 07 00 00 00	 mov	 eax, 7
  00065	5f		 pop	 edi
  00066	5e		 pop	 esi
  00067	5d		 pop	 ebp
  00068	5b		 pop	 ebx

; 484  : #endif
; 485  : #if defined (__osf__) || defined (__linux__)
; 486  : 		OP_ExitThread(MMSYSERR_NOERROR);
; 487  : 		OP_THREAD_RETURN;
; 488  : #endif
; 489  : }

  00069	c2 04 00	 ret	 4
$L71220:

; 295  : 		}
; 296  : #endif
; 297  : #if defined (__osf__) || defined (__linux__)
; 298  : 			phTTS->uiThreadError = MMSYSERR_NOMEM;
; 299  : 		}
; 300  : 		}
; 301  : #endif
; 302  : 
; 303  : #ifdef WIN32
; 304  : 	SetEvent (phTTS->hMallocSuccessEvent);	/* Malloc s are success,set the event */

  0006c	8b 47 1c	 mov	 eax, DWORD PTR [edi+28]
  0006f	50		 push	 eax
  00070	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetEvent@4

; 305  : #endif
; 306  : #if defined (__osf__) || defined (__linux__)
; 307  :         /* CP: Set the event, even if malloc eerror occurred. User
; 308  :          * will look at uiThreadError for actual error code.
; 309  :          */
; 310  : 		OP_SetEvent(phTTS->hMallocSuccessEvent);
; 311  :         if (phTTS->uiThreadError != MMSYSERR_NOERROR)
; 312  : 		{
; 313  : 			OP_ExitThread(phTTS->uiThreadError);
; 314  : 			OP_THREAD_RETURN;
; 315  : 		}
; 316  : #endif
; 317  : #endif
; 318  : 
; 319  : 	/* Associate this structure handle with current PH thread data structure */
; 320  : 	pDph_t->pSTphsettar = pDphsettar_st;

  00076	89 9e d0 2b 00
	00		 mov	 DWORD PTR [esi+11216], ebx

; 321  : 	/* MVP :Do required initialization of certain elements of DPHSETTAR_ST structure */
; 322  : #ifdef WITHOUT_CALLOC
; 323  : 	pDphsettar_st->drawinitsw = 0;
; 324  : 	pDphsettar_st->breathyah = 0;
; 325  : 	pDphsettar_st->breathytilt = 0;
; 326  : 	pDphsettar_st->nrises_sofar = 0;
; 327  : 	pDphsettar_st->hatsize = 0;    
; 328  : #ifdef MWS_US
; 329  : 	pDphsettar_st->lastbound = 0; 
; 330  : #endif
; 331  : 	pDphsettar_st->tarbas=0;
; 332  : 	pDphsettar_st->hat_loc_re_baseline = 0;
; 333  : 	pDphsettar_st->initsw = 0;		   	/* MVP :03/19/96 */
; 334  : 
; 335  : 	pDphsettar_st->sprlast = 0;		   	/* MVP :03/19/96 */
; 336  : 
; 337  : 	pDphsettar_st->strucstressprev = 0;	/* MVP :03/19/96 */      
; 338  : 
; 339  : 	pDphsettar_st->phonex_drawt0 = 0;  	/* MVP :03/19/96 */
; 340  : 
; 341  : 	pDphsettar_st->tarseg = 0;		   	/* MVP :03/19/96 */
; 342  : 
; 343  : 	pDphsettar_st->tarseg1 = 0;		   	/* MVP :03/19/96 */
; 344  : 
; 345  : 	pDphsettar_st->nimp = 0;		   	/* MVP :03/19/96 */
; 346  : 
; 347  : 	pDphsettar_st->timecos10 = 0;	   	/* MVP :03/19/96 */
; 348  : 
; 349  : 	pDphsettar_st->timecos15 = 0;	   	/* MVP :03/19/96 */
; 350  : 
; 351  : 	pDphsettar_st->timecosvib = 0;	/* MVP :03/19/96 */
; 352  : 	/* MVP : 03/15/96 Do required initialization of certain elements of  DPH_T structure    */
; 353  : 	pDph_t->initpardelay = 0;
; 354  : 	/* MVP: 03/18/96 */
; 355  : 	for (i = 0; i < VOICE_PARS; i++)
; 356  : 		pDph_t->parstochip[i] = 0;
; 357  : 	pDph_t->shrink=0;
; 358  : 	pDph_t->shrib=0;
; 359  : 	pDph_t->shrif=0;
; 360  : 
; 361  : #ifdef PH_SWAPDATA
; 362  : 	pDph_t->PHSwapCnt=0; //Foe evan balaban
; 363  : #endif
; 364  : 
; 365  : #ifdef GERMAN
; 366  : 		pDph_t->curr_insph=0;
; 367  : 		pDph_t->modulcount=0;	 	/* for uvular /R/ modulation 			*/
; 368  : 		pDph_t->new_sentence=0;  	/* for german sentence intonation 		*/
; 369  : 		pDph_t->old_delay=0;	   	/* for intonation 						*/	
; 370  : 		pDph_t->nstep=0;
; 371  : 		pDph_t->gain=0;
; 372  : 		pDph_t->tarold=0;
; 373  : 		pDph_t->dur1=0;
; 374  : 		pDph_t->slope=0;
; 375  : 		pDph_t->oldval=0;
; 376  : 		pDph_t->tcount=0;
; 377  : 		pDph_t->dirchange=0;
; 378  : 		pDph_t->osil=0;
; 379  : 		memset(pDph_t->pars,0,sizeof(SENT_PARS)*MAXSPA);
; 380  : 		pDph_t->hat_seen=0;
; 381  : 		pDph_t->wordcount=0;
; 382  : 		memset(pDph_t->Intonation,0,sizeof(SENTENCE_INTONATION));
; 383  : 		pDph_t->old_delay=0;
; 384  : #endif
; 385  : #endif
; 386  : 
; 387  : 	/* MVP : Initialize the speaker param arrays voidef,voidef_8 here */
; 388  : 	/* NAL : Initialize the speaker param arrays tunedef,tunedef_8 here */
; 389  : 
; 390  : 	pDph_t->voidef_8[0] = paul_8;

  0007c	c7 86 e8 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6120], OFFSET FLAT:_paul_8

; 391  : 	pDph_t->voidef_8[1] = betty_8;

  00086	c7 86 ec 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6124], OFFSET FLAT:_betty_8

; 392  : 	pDph_t->voidef_8[2] = harry_8;

  00090	c7 86 f0 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6128], OFFSET FLAT:_harry_8

; 393  : 	pDph_t->voidef_8[3] = frank_8;

  0009a	c7 86 f4 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6132], OFFSET FLAT:_frank_8

; 394  : 	pDph_t->voidef_8[4] = dennis_8;

  000a4	c7 86 f8 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6136], OFFSET FLAT:_dennis_8

; 395  : 	pDph_t->voidef_8[5] = kit_8;

  000ae	c7 86 fc 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6140], OFFSET FLAT:_kit_8

; 396  : 	pDph_t->voidef_8[6] = ursula_8;
; 397  : 	pDph_t->voidef_8[7] = rita_8;
; 398  : 	pDph_t->voidef_8[8] = wendy_8;
; 399  : 	pDph_t->voidef_8[9] = pDph_t->var_val;
; 400  : 
; 401  : 	pDph_t->voidef[0] = paul;
; 402  : 	pDph_t->voidef[1] = betty;
; 403  : 	pDph_t->voidef[2] = harry;
; 404  : 	pDph_t->voidef[3] = frank;
; 405  : 	pDph_t->voidef[4] = dennis;
; 406  : 	pDph_t->voidef[5] = kit;
; 407  : 	pDph_t->voidef[6] = ursula;
; 408  : 	pDph_t->voidef[7] = rita;
; 409  : 	pDph_t->voidef[8] = wendy;
; 410  : 	pDph_t->voidef[9] = pDph_t->var_val;
; 411  : 
; 412  : 	pDph_t->tunedef_8[0] = paul_8_tune;
; 413  : 	pDph_t->tunedef_8[1] = betty_8_tune;
; 414  : 	pDph_t->tunedef_8[2] = harry_8_tune;
; 415  : 	pDph_t->tunedef_8[3] = frank_8_tune;
; 416  : 	pDph_t->tunedef_8[4] = dennis_8_tune;
; 417  : 	pDph_t->tunedef_8[5] = kit_8_tune;
; 418  : 	pDph_t->tunedef_8[6] = ursula_8_tune;
; 419  : 	pDph_t->tunedef_8[7] = rita_8_tune;
; 420  : 	pDph_t->tunedef_8[8] = wendy_8_tune;
; 421  : 	pDph_t->tunedef_8[9] = pDph_t->var_val;
; 422  : 
; 423  : 	pDph_t->tunedef[0] = paul_tune;
; 424  : 	pDph_t->tunedef[1] = betty_tune;
; 425  : 	pDph_t->tunedef[2] = harry_tune;
; 426  : 	pDph_t->tunedef[3] = frank_tune;
; 427  : 	pDph_t->tunedef[4] = dennis_tune;
; 428  : 	pDph_t->tunedef[5] = kit_tune;
; 429  : 	pDph_t->tunedef[6] = ursula_tune;
; 430  : 	pDph_t->tunedef[7] = rita_tune;
; 431  : 	pDph_t->tunedef[8] = wendy_tune;
; 432  : 	pDph_t->tunedef[9] = pDph_t->var_val;
; 433  : 
; 434  : #ifdef MSDOS
; 435  : 	pKsd_t->lang_curr = LANG_none;	/* KM added for initilizing lang tables */
; 436  : #endif
; 437  : 
; 438  : #ifdef MSDOS
; 439  : #ifdef ENGLISH_US
; 440  : 		default_lang (LANG_english, LANG_ph_ready);
; 441  : #endif
; 442  : #ifdef ENGLISH_UK
; 443  : 		default_lang (LANG_british, LANG_ph_ready);
; 444  : #endif
; 445  : #ifdef SPANISH_SP
; 446  : 		default_lang (LANG_spanish, LANG_ph_ready);
; 447  : #endif
; 448  : #ifdef SPANISH_LA
; 449  : 		default_lang (LANG_latin_american, LANG_ph_ready);
; 450  : #endif
; 451  : #ifdef GERMAN                        
; 452  : 		default_lang (LANG_german, LANG_ph_ready);
; 453  : #endif
; 454  : 
; 455  : 	create_process (kltask, 4, data_seg, stack_start, 0);
; 456  : 
; 457  : #else
; 458  : #ifdef ENGLISH_US
; 459  : 		default_lang (pKsd_t, LANG_english, LANG_ph_ready);

  000b8	6a 02		 push	 2
  000ba	c7 86 00 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6144], OFFSET FLAT:_ursula_8
  000c4	8d 86 60 18 00
	00		 lea	 eax, DWORD PTR [esi+6240]
  000ca	6a 00		 push	 0
  000cc	c7 86 04 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6148], OFFSET FLAT:_rita_8
  000d6	55		 push	 ebp
  000d7	c7 86 08 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6152], OFFSET FLAT:_wendy_8
  000e1	89 86 0c 18 00
	00		 mov	 DWORD PTR [esi+6156], eax
  000e7	c7 86 c0 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6080], OFFSET FLAT:_paul
  000f1	c7 86 c4 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6084], OFFSET FLAT:_betty
  000fb	c7 86 c8 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6088], OFFSET FLAT:_harry
  00105	c7 86 cc 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6092], OFFSET FLAT:_frank
  0010f	c7 86 d0 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6096], OFFSET FLAT:_dennis
  00119	c7 86 d4 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6100], OFFSET FLAT:_kit
  00123	c7 86 d8 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6104], OFFSET FLAT:_ursula
  0012d	c7 86 dc 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6108], OFFSET FLAT:_rita
  00137	c7 86 e0 17 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6112], OFFSET FLAT:_wendy
  00141	89 86 e4 17 00
	00		 mov	 DWORD PTR [esi+6116], eax
  00147	c7 86 38 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6200], OFFSET FLAT:_paul_8_tune
  00151	c7 86 3c 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6204], OFFSET FLAT:_betty_8_tune
  0015b	c7 86 40 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6208], OFFSET FLAT:_harry_8_tune
  00165	c7 86 44 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6212], OFFSET FLAT:_frank_8_tune
  0016f	c7 86 48 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6216], OFFSET FLAT:_dennis_8_tune
  00179	c7 86 4c 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6220], OFFSET FLAT:_kit_8_tune
  00183	c7 86 50 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6224], OFFSET FLAT:_ursula_8_tune
  0018d	c7 86 54 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6228], OFFSET FLAT:_rita_8_tune
  00197	c7 86 58 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6232], OFFSET FLAT:_wendy_8_tune
  001a1	89 86 5c 18 00
	00		 mov	 DWORD PTR [esi+6236], eax
  001a7	c7 86 10 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6160], OFFSET FLAT:_paul_tune
  001b1	c7 86 14 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6164], OFFSET FLAT:_betty_tune
  001bb	c7 86 18 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6168], OFFSET FLAT:_harry_tune
  001c5	c7 86 1c 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6172], OFFSET FLAT:_frank_tune
  001cf	c7 86 20 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6176], OFFSET FLAT:_dennis_tune
  001d9	c7 86 24 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6180], OFFSET FLAT:_kit_tune
  001e3	c7 86 28 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6184], OFFSET FLAT:_ursula_tune
  001ed	c7 86 2c 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6188], OFFSET FLAT:_rita_tune
  001f7	c7 86 30 18 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+6192], OFFSET FLAT:_wendy_tune
  00201	89 86 34 18 00
	00		 mov	 DWORD PTR [esi+6196], eax
  00207	e8 00 00 00 00	 call	 _default_lang

; 460  : #endif
; 461  : #ifdef ENGLISH_UK
; 462  : 		default_lang (pKsd_t, LANG_british, LANG_ph_ready);
; 463  : #endif
; 464  : #ifdef SPANISH_SP
; 465  : 		default_lang (pKsd_t, LANG_spanish, LANG_ph_ready);
; 466  : #endif
; 467  : #ifdef SPANISH_LA
; 468  : 		default_lang (pKsd_t, LANG_latin_american, LANG_ph_ready);
; 469  : #endif
; 470  : #ifdef GERMAN
; 471  : 		default_lang (pKsd_t, LANG_german, LANG_ph_ready);
; 472  : #endif
; 473  : #ifdef FRENCH
; 474  : 		default_lang (pKsd_t, LANG_french, LANG_ph_ready);
; 475  : #endif
; 476  : 
; 477  : 	kltask (phTTS);

  0020c	57		 push	 edi
  0020d	e8 00 00 00 00	 call	 _kltask

; 478  : 	/* Free the allocated instance specific structure,before the thread returns */
; 479  : 	FreePHInstanceData (pDph_t);

  00212	56		 push	 esi
  00213	e8 00 00 00 00	 call	 _FreePHInstanceData
  00218	83 c4 14	 add	 esp, 20			; 00000014H

; 480  : 	phTTS->pPHThreadData = pDph_t = NULL;

  0021b	c7 47 18 00 00
	00 00		 mov	 DWORD PTR [edi+24], 0

; 481  : #endif
; 482  : #if defined (MSDOS) || defined (WIN32)
; 483  : 	return 0;						/* No error MVP */

  00222	33 c0		 xor	 eax, eax
  00224	5f		 pop	 edi
  00225	5e		 pop	 esi
  00226	5d		 pop	 ebp
  00227	5b		 pop	 ebx

; 484  : #endif
; 485  : #if defined (__osf__) || defined (__linux__)
; 486  : 		OP_ExitThread(MMSYSERR_NOERROR);
; 487  : 		OP_THREAD_RETURN;
; 488  : #endif
; 489  : }

  00228	c2 04 00	 ret	 4
_ph_main@4 ENDP
_TEXT	ENDS
EXTRN	__imp__free:NEAR
EXTRN	_spcfree:NEAR
_TEXT	SEGMENT
_pDph_t$ = 8
_FreePHInstanceData PROC NEAR

; 493  : {

  00230	56		 push	 esi

; 494  : if (pDph_t->pSTphsettar)

  00231	8b 74 24 08	 mov	 esi, DWORD PTR _pDph_t$[esp]
  00235	57		 push	 edi
  00236	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__free
  0023c	8b 86 d0 2b 00
	00		 mov	 eax, DWORD PTR [esi+11216]
  00242	85 c0		 test	 eax, eax
  00244	74 06		 je	 SHORT $L71226

; 495  :      free (pDph_t->pSTphsettar);

  00246	50		 push	 eax
  00247	ff d7		 call	 edi
  00249	83 c4 04	 add	 esp, 4
$L71226:

; 496  :      pDph_t->pSTphsettar = NULL;
; 497  :      
; 498  :      // tek 13aug96 have to free the last delaypars
; 499  :      if(pDph_t->delaypars)

  0024c	8b 86 b4 2b 00
	00		 mov	 eax, DWORD PTR [esi+11188]
  00252	c7 86 d0 2b 00
	00 00 00 00 00	 mov	 DWORD PTR [esi+11216], 0
  0025c	85 c0		 test	 eax, eax
  0025e	74 09		 je	 SHORT $L71228

; 500  :      spcfree(pDph_t->delaypars);

  00260	50		 push	 eax
  00261	e8 00 00 00 00	 call	 _spcfree
  00266	83 c4 04	 add	 esp, 4
$L71228:

; 501  :      
; 502  :      if (pDph_t)

  00269	85 f6		 test	 esi, esi
  0026b	74 06		 je	 SHORT $L71230

; 503  :      free (pDph_t);

  0026d	56		 push	 esi
  0026e	ff d7		 call	 edi
  00270	83 c4 04	 add	 esp, 4
$L71230:
  00273	5f		 pop	 edi
  00274	5e		 pop	 esi

; 504  :      
; 505  : pDph_t = NULL;
; 506  :      
; 507  :      }

  00275	c3		 ret	 0
_FreePHInstanceData ENDP
_TEXT	ENDS
END
