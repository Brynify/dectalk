<HTML>
<HEAD>
<TITLE>Return of Memory Buffers</TITLE>
</HEAD><BODY BGCOLOR="#ffffe0">
<A HREF= "DECtalkDECtalk.html"><IMG SRC="contents.gif" ALT="contents.gif" BORDER = 0></A><A HREF= "DECtalkindex.html"><IMG SRC="index.gif" ALT="index.gif" BORDER = 0></A><A HREF= "DECtalkTTSCAPST_Structure_ttsap00000136.html"><IMG SRC="prev1.gif" ALT="prev1.gif" BORDER = 0></A><A HREF= "DECtalkDictionary_Calls_UNIX_only.html"><IMG SRC="next1.gif" ALT="next1.gif" BORDER = 0></A>
<P>
<A NAME="off_1343522"></A><A NAME="b7038013"></A><A NAME="off_1343522"></A><A NAME="b7038013"></A><FONT FACE="Arial" SIZE="4"><B>Return of Memory Buffers
<P>
</B></FONT><FONT FACE="HELVETICA" SIZE="4">When the memory buffer is completed, the memory buffer is returned to the
calling application. A memory buffer is considered completed when any one of the
following occur:
<P>
<IMG SRC="DECtalk00090000.gif" ALT="DECtalk00090000.gif" BORDER=0 WIDTH=6 HEIGHT=16> The memory buffer, which is pointed to by the lpData field, is filled.
<P>
<IMG SRC="DECtalk00090000.gif" ALT="DECtalk00090000.gif" BORDER=0 WIDTH=6 HEIGHT=16> The phoneme array is filled. 
<P>
  Click </FONT><FONT FACE="HELVETICA" COLOR="#008000" SIZE="4"><A HREF="DECtalkPhonemic_Symbols.html">here</A></FONT><FONT FACE="HELVETICA" SIZE="4"> to go to the help on Phonemic Symbols for more information on the phoneme
codes.
<P>
<IMG SRC="DECtalk00090000.gif" ALT="DECtalk00090000.gif" BORDER=0 WIDTH=6 HEIGHT=16> The index mark array is filled. 
<P>
  Click </FONT><FONT FACE="HELVETICA" COLOR="#008000" SIZE="4"><A HREF="DECtalkIndex_Marks_for_Speech_Status.html">here</A></FONT><FONT FACE="HELVETICA" SIZE="4"> to go to the Index Mark for Speech Status help for more information on using
index marks.
<P>
<IMG SRC="DECtalk00090000.gif" ALT="DECtalk00090000.gif" BORDER=0 WIDTH=6 HEIGHT=16> A TTS_FORCE argument is used in the call to TextToSpeechSpeak.
<P>
The application must not modify any buffer passed to the text-to-speech system
by the TextToSpeechAddBuffer call until the buffer is returned from the
text-to-speech system to the calling application. The application then owns the
buffer. If no buffers are available, the system blocks. If the application is
processing relatively long passages of text, it is recommended that the application
queues several buffers and then requeues each buffer after finishing with it so
that the system is not idle.
<P>
A call to TextToSpeechReset returns all buffers to the application. The
TextToSpeechReturnBuffer call is supplied to force the return of the current memory
buffer, whether it is filled or not. This call might not be required by most
applications. It is includes so an application can obtain the last buffer without
forcing that buffer to be sent with the TTS_FORCE command in the
TextToSpeechSpeak call. This might be required if the application performs its own buffer
management.
<P>
When the memory buffer, a </FONT><FONT FACE="HELVETICA" COLOR="#008000" SIZE="4"><A HREF="DECtalkTTSBUFFERT_Structure_ttsapih.html">TTS_BUFFER_T</A></FONT><FONT FACE="HELVETICA" SIZE="4"> structure, is returned to the calling application, it contains the following
return values:
<P>
</FONT><FONT FACE="HELVETICA" COLOR="#000000" SIZE="4"><I>Memory Buffer Return Values
<P>
</I></FONT><TABLE><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3"><B>Parameter
<BR></B></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3"><B>Value
<BR></B></FONT></TD></TR><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3">dwBufferLength
<BR></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3">Number of bytes of audio samples.
<BR></FONT></TD></TR><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3">lpData
<BR></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3">Pointer to the audio sample data.
<BR></FONT></TD></TR><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3">dwNumberOfPhonemeChanges
<BR></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3">Number of phoneme changes.
<BR></FONT></TD></TR><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3">lpPhonemeArray
<BR></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3">Pointer to the phoneme information.
<BR></FONT></TD></TR><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3">dwNumberOfIndexMarks
<BR></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3">Number of index marks. 
<BR></FONT></TD></TR><TR VALIGN=TOP><TD><FONT FACE="HELVETICA" SIZE="3">lpIndexArray
<BR></FONT></TD><TD><FONT FACE="HELVETICA" SIZE="3">Pointer to the index mark information.
<BR>
<BR></FONT></TD></TR></TABLE><FONT FACE="HELVETICA" SIZE="4">The index and phoneme arrays each contain a time stamp in the form of a sample
number. This sample number is initialized at zero at startup and after each
call to TextToSpeechReset. The phoneme array also contains the current phoneme
duration in frames. Each frame is approximately 6.4 milliseconds.
<P>
<HR>  Related topics 
<P>
</FONT></BODY>
</HTML>