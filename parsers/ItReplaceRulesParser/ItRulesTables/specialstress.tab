// special stress rules: stress on syllable from end.
// some of these rules appear quite obscure see for instance 
// the ones with the gem condition on the right side.
// Don't worry: There was always a point in time when I understood 
// how this works.
// I put a stress 1 as x if the word should not cause rafforzamente 
// For example con should not trigger raff.

set BOUND = ["#", " "];
set svow = ["a","e","o"];
set wvow = ["i","u"];
set vow=[svow,wvow];
set liq = ["r","l"];
set nas = ["n","m"];
set son = ["v","j"];
set vplos = ["b", "d", "g"]; 
set uvplos = ["p", "t", "k", "ch", "cch"];
set ufric = ["s","c","sc","f"];
set plos = [vplos,uvplos];
set cons = [vplos, uvplos, ufric, liq, nas, son];
set gem=["bb","cc","dd","ff","gg","cch","ll","mm","nn","pp","rr","ss","tt","zz"];
set spezend = ["simi","simo", "mini", "modi","zito"];
set spezendB = ["ico", "ica", "ici", "iche"];
set spezendC = ["olo", "oli", "ola", "ulo", "ula", "ole", "ono"];
set adjectend = ["a", "o", "i", "e", "he"];
set reflex = ["me", "te", "se", "si", "ce", "ve","glie"];    
set cliticartic=["lo","la","li","ne"];
set reflexB = ["mi", "ti", "gli", "le", "ci", "vi"];

"ò"   > "1" / . _ BOUND ;
"à"   > "1" / . _ BOUND ;
"ù"   > "1" / . _ BOUND ;
"ì"   > "1" / . _ BOUND ;
"è"   > "1" / . _ BOUND ;
"é"   > "1" / . _ BOUND ;
"or"  > "x" / . _ BOUND ;
"ei"  > "1" / gem _ BOUND;
"ei"  > "1" / liq _ BOUND; 
NIL > "3" / vow + cons + cons _ "ola" + BOUND;
"issim" > "3" / . _ adjectend + BOUND | wvow + BOUND; 
"errim" > "3" / . _ adjectend + BOUND | wvow + BOUND; 
"evol" > "3" / . _ adjectend + BOUND | wvow + BOUND; 
"abil" > "3" / . _ adjectend + BOUND | wvow + BOUND; 
"ssono" > "3" / vow _ BOUND;                    
"iscono" > "3" / . _ BOUND;              // capiscono, finiscono
"assero" > "3" / . _ BOUND;
"acciono" > "3" / . _ BOUND;
"essero" > "3" / . _ BOUND;
"issero" > "3" / . _ BOUND;
"istico" > "3" / . _ BOUND;
"avano" > "3" / . _ BOUND;              // cantavano   
"evano" > "3" / . _ BOUND;              // vedevano
"ivano" > "3" / . _ BOUND;              // finivano
"arono" > "3" / . _ BOUND;
"erono" > "3" / . _ BOUND;
"irono" > "3" / . _ BOUND;
"ebbero" > "3" / . _ BOUND;              // canterebbero 
"izia"  > "3" / . _ BOUND;
"ugo" > "3" /  cons _ BOUND ;
"ile" > "3" /  cons _ BOUND ;   
"ili" > "3" /  cons _ BOUND ;
"ndo" > "3" /  vow _ cliticartic+BOUND | "si" + BOUND | reflex + BOUND;
"aria" > "3" / vow _ BOUND;
NIL > "3" /  vow _ "bile" + BOUND;  // words like mobile, nobile are sdrucciole
NIL > "3" /  vow _ spezend + BOUND;  // centesimi
NIL > "3" /  cons _ spezendB + BOUND;  // psichico
NIL > "3" /  vow + gem _ spezendC + BOUND;  // brufolo
NIL > "3" /  vow + cons _ spezendC + BOUND;  // brufolo
//"l" > "3" / vow + gem + vow _ vow + BOUND;      
//"r" > "3" / vow + gem + vow _ vow + BOUND;       wrong: counterexample errore
//"m" > "3" / vow + gem + vow _ vow + BOUND;      
//"n" > "3" / vow + gem + vow _ vow + BOUND;      
"per" > "0" / BOUND _ BOUND;
"estic" > "3" /. _ vow + BOUND;
NIL > "3" / cons _ reflex + cliticartic + BOUND;
NIL > "3" / cons _ reflexB + "si" + BOUND;
NIL > "x" / cons + vow _ nas + BOUND;
NIL > "x" / cons + vow _ liq + BOUND;